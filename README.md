# strategy_learner
DESCRIPTION
Used manually created technical indicators: Price/Exponential Moving Average (EMA), %B, Momentum, and Modified Moving Average Convergence/Divergence (MACD) 
as well as random forestÂ to create a classification based strategy learner. JPM is used to run all the tests

###testproject.py###
Calls other files/functions to run everything needed for the report in a single Python call
Runs the manual strategy and creates 2 graphs and 1 table to show both in sample and out of sample performance and compare with benchmark
Runs experiment 1 to create graph and table which compare in sample performance of manual strategy, strategy learner and benchmark
Runs experiment 2 to create graph and table showing in sample performance of strategy learner with different market impact values



###Instructions###
To generate everything needed for the project and print stats to the screen, run:
PYTHONPATH=../:. python testproject.py --print2screen

Without printing to the screen, run:
PYTHONPATH=../:. python testproject.py



###ManualStrategy.py###
Implements manual strategy
Function1: testPolicy(symbol = "AAPL", sd = dt.datetime(2010, 1, 1), ed = dt.datetime(2011, 12, 31), sv = 100000)
generate a single column dataframe which contains daily trades generated by my manual strategy

Function 2: benchMark(symbol, sd, ed)
Gets daily trades for the benchmark portfolio
Returns a single column data frame, indexed by date, whose values represent trades for each trading day over the given period for the benchmark portfolio

Fucntion 3: comparePerf(symbol, sv = 100000, commission = 9.95, impact=0.05, verbose=False)
Generate 2 graphs to show both in sample and out of sample performance of manual strategy and compare with benchmark, when verbose is True, prints performance statistics



###StrategyLearner.py###
Implements a strategy learner class
Function 1: add_evidence(self,symbol="AAPL",sd=dt.datetime(2008, 1, 1),ed=dt.datetime(2009, 12, 31),sv=100000)
Construct the learner with training data

Function 2: testPolicy(self,symbol="AAPL",sd=dt.datetime(2010, 1, 1),ed=dt.datetime(2011, 12, 31),sv=100000)
Generates daily trades based on strategy learner
		  		 			 	 	 		 		 	
          		  	   		   	 			  		 			 	 	 		 		 	
        
###experiment1.py###
Compares in sample performance on manual strategy and strategy learner
Function 1: comparePerf(df_manual, df_learner, df_benchmark, sv = 100000, commission = 9.95, impact=0.005, verbose=False)
Generates graph to compare in sample performance of manual strategy, strategy learner and benchmark, when verbose is True, prints performance statistics

Function 2: benchMark(symbol, sd, ed)
Gets daily trades for the benchmark portfolio
Returns a single column data frame, indexed by date, whose values represent trades for each trading day over the given period for the benchmark portfolio



###experiment2.py###
Compare in sample performance of strategy learner based on different market impact
Function 1: comparePerf(df_combined, verbose = False)
Generates graph to compare in sample performance of strategy learner based on different market impact values, when verbose is True, prints performance statistics


###Indicators.py###
Implements 5 technical indicators
Function 1: EMA(symbol, sd, ed, lookback, verbose=False)
Returns a single column dataframe which contains daily ratios of price over exponential moving average for the given period

Function 2: BBP(symbol, sd, ed, lookback, verbose=False)
Returns a single column dataframe which contains daily %Bollinger Bands indicator values for the given period

Function 3: Momentum(symbol, sd, ed, lookback, verbose = False)
Returns a single column dataframe which contains daily momentum values for the given period

Function 4: MACD(symbol, sd, ed, lookbacks=[12,26,9], verbose=False)
Returns a single column dataframe which contains daily differences of MACD and MACD Signal values for the given period

Function 5: OBV(symbol, sd, ed, lookback, verbose=False)
Returns a single column dataframe which contains rolling OBV changes for the given period


###RTLearner.py###
Implements random tree learner
Function 1: add_evidence(self, data_x, data_y)
adds training data to the learner

Function 2: build_tree(self, data)
recursively builds out the tree with training data

Function 3: query(self, points)
Estimate a set of test points given the model we built

Function 4: search_tree(self, x)
Estimate predicted value for one data point given the model we built



###BagLearner.py###
Implements bag learner
Function 1: add_evidence(self, data_x, data_y)
adds training data to the learner

Function 2: query(self, points)
Estimate a set of test points given the model we built


###marketsimcode.py###
Function 1: compute_portvals(df_trades, start_val=1000000, commission=0.00,impact=0.00,)		  	   		   	 			  		 			 	 	 		 		 	
Returns daily portfolio values as a single-column dataframe, from start_date to end_date, inclusive

Function 2: test_code(df_trades)
Helper function to test code

